<!DOCTYPE html>
<html>

<head>
  <title>Add Product</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
</head>

<body>
  <form id="addProductForm">
    <table>
      <tr>
        <td><label for="designation">Designation:</label></td>
        <td><input type="text" id="designation" name="designation" /></td>
      </tr>
      <tr>
        <td><label for="prix">Prix:</label></td>
        <td><input type="number" id="prix" name="prix" /></td>
      </tr>
      <tr>
        <td><label for="stock">Stock:</label></td>
        <td><input type="number" id="stock" name="stock" /></td>
      </tr>
      <tr>
        <td></td>
        <td><button type="submit">Add Product</button></td>
      </tr>
    </table>
  </form>
  <a href="../" class="btn btn-primary">Liste Produit</a>

  <script>
    const form = document.getElementById("addProductForm");

    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      const designation = document.getElementById("designation").value;
      const prix = document.getElementById("prix").value;
      const stock = document.getElementById("stock").value;

      const data = { designation, prix, stock };

      const response = await fetch("/add_product/add", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      });

      const result = await response.json();
      console.log(result);
      document.getElementById("designation").value = "";
      document.getElementById("prix").value = "";
      document.getElementById("stock").value = "";
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
</body>

</html>